<!doctype html>
<html>
<head><meta charset="utf-8"><title>Token</title></head>
<body>
<h2>Token status</h2>
<div>
  <button id="show">Show Access Token (sessionStorage)</button>
  <pre id="token"></pre>
</div>
<div>
  <button id="refresh">Request Refresh (POST /api/auth/refresh)</button>
  <pre id="refreshResult"></pre>
</div>

<script>
  document.getElementById('show').addEventListener('click', () => {
    document.getElementById('token').innerText = sessionStorage.getItem('accessToken') || '(no token)';
  });

  document.getElementById('refresh').addEventListener('click', async () => {
    // Refresh token is sent automatically via HttpOnly cookie
    const res = await fetch('/api/auth/refresh', { method: 'POST', credentials: 'include' });
    const json = await res.json().catch(() => ({error:'invalid'}));
    document.getElementById('refreshResult').innerText = JSON.stringify(json, null, 2);
    if (json.token) sessionStorage.setItem('accessToken', json.token);
  });
</script>
</body>
</html>