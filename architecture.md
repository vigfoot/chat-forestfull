# Chat-Forestfull 프로젝트

## 1. 회원가입 / 로그인

- TikTok OAuth 전용 로그인
- OAuth 토큰을 통해 사용자 정보(닉네임, 프로필 이미지, TikTok ID, 팔로우 정보) 수집
- 서버에서 JWT 발급 (액세스 토큰 30분, 리프레시 토큰 14일)
- 간단한 가입/로그인 절차로 실시간 커뮤니티 진입 장벽 최소화

## 2. 채팅방 단일화

- 단일 방, 선별된 사용자만 접근 가능
- 접근 기준:
  - TikTok 팔로우 여부
  - OAuth 가입 승인 여부
- 메시지 저장: 이전 글 모두 접근 가능
- 신규 사용자 가입 시 승인 자동화 가능 (팔로우 확인 API 사용 또는 관리자가 수동 승인)

## 3. 공지 / 알림 기능

- 브라우저 기반에서 푸시 알림 불가 환경 고려
- 대안:
  - 상단 고정 배너 (WebSocket / SSE)로 실시간 공지 표시
  - 채팅 상단 공지 라인 표시, 배경색 강조
  - 페이지 접근 시 임시 모달 팝업
- 공지 이벤트는 WebSocket 브로드캐스트
- 클라이언트는 상단 배너 또는 채팅 상단 고정 방식으로 표시

## 4. 멘션 기능

- 무료 사용, 포인트 불필요
- 실시간 알림 및 하이라이트 처리
- @username 패턴 감지 후 해당 사용자 화면 하이라이트
- 메시지 DB에는 원본과 멘션 필드 저장

## 5. 포인트 시스템 및 임시 매니저 기능

- 포인트 구매 순위 1~3위 사용자에게 일주일간 임시 매니저 권한 부여
- 주간 자동 집계

### 임시 매니저 권한

- mute 기능: 일반 사용자 대상, 1시간 제한, 주 10회 사용 가능
- 특별 채팅: 사진 + 텍스트 업로드 가능, 임시 매니저 권한 필요
- 권한 자동 만료: 1주일 후 소멸, 사용 기록 저장

## 6. 관리자 기능 (직접 운영)

- 사용자 관리: 가입 승인/접근 제한, 경고, 강퇴, mute, 임시 매니저 권한 발급/회수
- 채팅 모니터링: 실시간 메시지 스트림 확인, 금칙어 필터링, 악성 메시지 감지
- 공지 발행: 상단 배너, 채팅 상단, 모달 팝업
- 포인트/결제 관리: 결제 로그 확인, 포인트 구매 순위 확인
- 시스템 로그/감사: 임시 매니저 사용 내역, 채팅 삭제/관리 작업 기록
- 백업/DB 관리: 채팅 기록 백업, 이미지 업로드 파일 관리

## 7. 운영 고려 사항

- 채팅방 접근 제어: 팔로우 기준 자동 승인으로 운영 부담 최소화, OAuth 승인 기준은 품질 관리에 유리
- 공지 표시: 브라우저 푸시가 불가하므로 상단 배너 + SSE/WS 조합, 중요 내용 클릭 시 모달 열기
- 임시 매니저 남용 방지: 주 10회 제한, 1시간 mute, 로그 기록으로 책임 추적
- 이미지 업로드: 특별 채팅에서만 가능, 클라우드 스토리지(AWS S3 등) 사용 권장

